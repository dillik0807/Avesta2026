# ✏️ Инструкция: Редактирование групп складов у существующих пользователей

## 📋 Обзор функции

Теперь администратор может **легко изменять группы складов** у уже созданных пользователей без необходимости их пересоздания.

## 🎯 Как использовать

### 1. Открытие редактора групп
1. Войдите как **администратор**
2. Перейдите в раздел **"Пользователи"**
3. В таблице пользователей найдите нужного пользователя
4. Нажмите кнопку **"✏️ Группы"** в столбце "Действия"

### 2. Редактирование групп
1. Откроется модальное окно **"Редактировать группы складов"**
2. Вы увидите:
   - Имя пользователя
   - Роль пользователя
   - Список всех доступных групп складов
3. **Выберите нужные группы:**
   - Удерживайте **Ctrl** (или **Cmd** на Mac)
   - Кликайте по нужным группам для выбора/отмены
   - Можно выбрать несколько групп одновременно

### 3. Сохранение изменений
1. Нажмите кнопку **"Сохранить"**
2. Появится уведомление с новыми группами пользователя
3. Изменения сразу вступают в силу

## 🖥️ Интерфейс

### Таблица пользователей:
```
Логин | Роль     | Подгруппы складов | Действия
------|----------|-------------------|------------------
tillo | Завсклад | Сугд             | ✏️ Группы 🔑 Пароль 🗑️ Удалить
admin | Админ    | -                | ✏️ Группы 🔑 Пароль 🗑️ Удалить
```

### Модальное окно редактирования:
```
┌─────────────────────────────────────┐
│ ✏️ Редактировать группы складов    │
├─────────────────────────────────────┤
│ Пользователь: tillo                 │
│ Роль: Завсклад                      │
│                                     │
│ Подгруппы складов:                  │
│ ┌─────────────────┐                 │
│ │ ☑ Сугд          │                 │
│ │ ☐ Хисор         │                 │
│ │ ☐ Душанбе       │                 │
│ │ ☐ Куляб         │                 │
│ │ ☐ Вахдат        │                 │
│ │ ☐ Турсунзаде    │                 │
│ └─────────────────┘                 │
│ Удерживайте Ctrl для выбора         │
│ нескольких групп                    │
│                                     │
│           [Отмена] [Сохранить]      │
└─────────────────────────────────────┘
```

## 📝 Примеры использования

### Пример 1: Добавление новой группы
**Ситуация:** Завсклад tillo работал только в Сугде, теперь нужно добавить Хисор

**Действия:**
1. Нажать "✏️ Группы" у пользователя tillo
2. Выбрать "Сугд" (уже выбрано) + "Хисор" (добавить)
3. Нажать "Сохранить"

**Результат:** tillo теперь видит склады из Сугда и Хисора

### Пример 2: Замена группы
**Ситуация:** Завсклад abdullo переводится из Хисора в Душанбе

**Действия:**
1. Нажать "✏️ Группы" у пользователя abdullo
2. Снять выбор с "Хисор"
3. Выбрать "Душанбе"
4. Нажать "Сохранить"

**Результат:** abdullo теперь видит только склады Душанбе

### Пример 3: Множественные группы
**Ситуация:** Создать супервайзера для нескольких регионов

**Действия:**
1. Нажать "✏️ Группы" у пользователя supervisor
2. Выбрать "Сугд", "Хисор", "Душанбе"
3. Нажать "Сохранить"

**Результат:** supervisor видит склады из всех трех регионов

## ⚡ Мгновенное применение

### Если редактируется текущий пользователь:
- Изменения применяются **немедленно**
- Обновляются все выпадающие списки складов
- Пользователь сразу видит новые доступные склады
- Не требуется перезаход в систему

### Если редактируется другой пользователь:
- Изменения сохраняются в базе данных
- Применятся при следующем входе пользователя в систему

## 🔒 Безопасность

### Права доступа:
- **Только администраторы** могут редактировать группы
- **Завсклады и другие роли** не видят кнопку редактирования
- Нельзя редактировать группы у самого себя (кроме админа)

### Валидация:
- Система проверяет существование пользователя
- Проверяет корректность выбранных групп
- Автоматически обновляет права доступа

## 🎯 Преимущества

1. **Быстрота:** Не нужно пересоздавать пользователей
2. **Гибкость:** Легко перераспределять территории
3. **Удобство:** Интуитивный интерфейс
4. **Безопасность:** Строгий контроль прав доступа
5. **Мгновенность:** Изменения применяются сразу

## ⚠️ Важные моменты

- **Сохранение данных:** Все изменения автоматически сохраняются
- **История операций:** Пользователь продолжает видеть свои старые операции
- **Новые операции:** Можно создавать только для новых доступных складов
- **Отчеты:** Автоматически фильтруются по новым группам

## 🔄 Откат изменений

Если нужно вернуть старые группы:
1. Снова нажать "✏️ Группы"
2. Выбрать прежние группы
3. Сохранить изменения

---

**Готово!** Теперь вы можете легко управлять группами складов для любых пользователей! 🎉