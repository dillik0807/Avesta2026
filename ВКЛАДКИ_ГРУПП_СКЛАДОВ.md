# 📑 Вкладки групп складов на главной панели

## ✅ Что изменено

Теперь цены на главной панели отображаются в **отдельных вкладках для каждой группы складов**:

### Новый интерфейс с вкладками:
```
💰 Текущие цены товаров                    🔄 Обновить ⚙️ Управление

Последнее обновление: 27.01.2025, 15:30:45

┌─────────────────────────────────────────────────────────────┐
│ [Все склады] [Сугд] [Хисор] [Душанбе]                      │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ Сугд                                                        │
│                                                             │
│ Пшеница                           1,200.00 за тонну         │
│                                   Сегодня 14:15             │
│ ─────────────────────────────────────────────────────────── │
│ Ячмень                              980.00 за тонну         │
│                                   26.01.2025 16:45          │
│ ─────────────────────────────────────────────────────────── │
│ Кукуруза                          1,150.00 за тонну         │
│                                   25.01.2025 10:30          │
└─────────────────────────────────────────────────────────────┘
```

## 🎯 Функциональность вкладок

### Переключение между группами:
- **Клик по вкладке** - мгновенное переключение на группу
- **Активная вкладка** - выделена синим цветом
- **Неактивные вкладки** - серые с эффектом наведения

### Порядок вкладок:
1. **"Все склады"** - всегда первая вкладка
2. **Остальные группы** - по алфавиту (Сугд, Хисор, Душанбе)

### Содержимое каждой вкладки:
- **Заголовок группы** - название группы складов
- **Список товаров** - отсортированный по алфавиту
- **Цены и даты** - актуальная информация
- **Пустое состояние** - если нет цен для группы

## 🎨 Дизайн вкладок

### Активная вкладка:
```css
background: #2563eb (синий)
color: white
font-weight: medium
```

### Неактивная вкладка:
```css
background: #e5e7eb (серый)
color: #374151 (темно-серый)
hover: #d1d5db (светло-серый при наведении)
```

### Содержимое вкладки:
- **Заголовок:** `text-lg font-bold text-gray-800`
- **Товары:** `text-base font-medium text-gray-800`
- **Цены сегодня:** `text-lg text-green-700 font-bold`
- **Старые цены:** `text-lg text-gray-700 font-semibold`
- **Hover эффект:** `hover:bg-gray-100` для строк товаров

## 🔧 Техническая реализация

### Структура HTML:
```html
<!-- Вкладки -->
<div id="priceGroupTabs">
  <div class="flex flex-wrap gap-2 border-b border-gray-200 pb-2">
    <button class="px-4 py-2 rounded-lg bg-blue-600 text-white">Все склады</button>
    <button class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700">Сугд</button>
    <button class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700">Хисор</button>
  </div>
</div>

<!-- Контент активной вкладки -->
<div id="dashboardPricesList">
  <div class="text-sm">
    <h3 class="font-bold text-gray-800 mb-4 text-lg">Сугд</h3>
    <div class="space-y-2">
      <!-- Товары группы -->
    </div>
  </div>
</div>
```

### Ключевые функции:
- `createPriceGroupTabs()` - создание вкладок
- `switchPriceGroup()` - переключение между группами
- `showPriceGroup()` - отображение контента группы
- `currentActiveGroup` - отслеживание активной группы

### Алгоритм работы:
1. **Загрузка данных** - получение цен по группам
2. **Создание вкладок** - динамическое создание кнопок
3. **Выбор активной группы** - первая группа по умолчанию
4. **Отображение контента** - товары выбранной группы
5. **Обработка кликов** - переключение между вкладками

## 🚀 Преимущества вкладок

1. **Чистый интерфейс** - показывается только одна группа
2. **Быстрое переключение** - мгновенная смена контента
3. **Экономия места** - компактное отображение
4. **Фокус на группе** - концентрация на конкретных ценах
5. **Интуитивность** - привычный интерфейс вкладок

## 📱 Мобильная адаптация

### Адаптивные вкладки:
- **Перенос строк** - вкладки переносятся на новую строку
- **Сенсорное управление** - удобные области нажатия
- **Прокрутка** - горизонтальная прокрутка при необходимости

### Размеры для мобильных:
- **Вкладки:** `px-3 py-2` вместо `px-4 py-2`
- **Текст товаров:** адаптивные размеры шрифтов
- **Отступы:** уменьшенные для экономии места

## 🧪 Тестовые сценарии

### Сценарий 1: Переключение между вкладками
1. **Установите цены** для разных групп складов
2. **Перейдите на главную** - должны появиться вкладки
3. **Кликните по вкладке "Сугд"** - должны показаться цены Сугда
4. **Кликните по вкладке "Хисор"** - должны показаться цены Хисора
5. **Проверьте выделение** - активная вкладка должна быть синей

### Сценарий 2: Пустая группа
1. **Создайте группу** без установленных цен
2. **Перейдите на эту вкладку**
3. **Должно показаться:**
   ```
   📦
   Нет цен для группы "Название"
   ```

### Сценарий 3: Фильтрация по ролям
1. **Войдите как завсклад группы "Сугд"**
2. **Должны видеть вкладки:** "Все склады", "Сугд"
3. **НЕ должны видеть:** вкладки других групп

## ⚡ Производительность

### Оптимизации:
- **Ленивая загрузка** - контент создается при переключении
- **Кэширование данных** - группированные цены сохраняются
- **Минимум DOM** - только активный контент в памяти
- **Быстрое переключение** - без перезагрузки данных

### Память:
- **Одновременно активна** только одна вкладка
- **Данные группируются** один раз при загрузке
- **Переиспользование** HTML контейнеров

## 🔄 Состояние вкладок

### Сохранение активной вкладки:
- **При обновлении цен** - остается активной та же группа
- **При переходе на другую страницу** - сбрасывается на первую
- **При входе в систему** - выбирается первая доступная группа

### Автоматический выбор:
- **Если активная группа исчезла** - переключение на первую
- **Если нет доступных групп** - показ сообщения "Нет цен"
- **При изменении прав доступа** - обновление списка вкладок

---

**Готово!** Теперь каждая группа складов имеет свою отдельную страничку-вкладку! 📑💰

## 💡 Возможные улучшения

В будущем можно добавить:
- **Счетчики товаров** на вкладках (например, "Сугд (3)")
- **Индикаторы обновлений** - точки на вкладках с новыми ценами
- **Горячие клавиши** для переключения между вкладками
- **Закрепление вкладок** - избранные группы всегда видны
- **Группировка вкладок** - складывание редко используемых групп