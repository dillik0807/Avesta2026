<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">üîê –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –∫ –≥–ª–∞–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏</h1>
        
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <h2 class="text-lg font-semibold text-blue-800 mb-2">‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:</h2>
            <ul class="text-blue-700 text-sm space-y-1">
                <li>‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–¥–µ–ª—É 'dashboard' –¥–ª—è —Ä–æ–ª–∏ 'manager'</li>
                <li>‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è showSection() - —Ä–∞–∑—Ä–µ—à–µ–Ω –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</li>
                <li>‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è setupUserInterface() - –∫–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–∞—è" –≤–∏–¥–Ω–∞</li>
                <li>‚Ä¢ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è updateMobileMenuAccess() - –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é</li>
            </ul>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- –¢–µ—Å—Ç –≤—Ö–æ–¥–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold mb-4">üë§ –¢–µ—Å—Ç –≤—Ö–æ–¥–∞ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è</h3>
                <div class="space-y-3">
                    <div class="p-3 bg-gray-50 rounded">
                        <strong>–õ–æ–≥–∏–Ω:</strong> rukovoditel<br>
                        <strong>–ü–∞—Ä–æ–ª—å:</strong> 123456<br>
                        <strong>–†–æ–ª—å:</strong> manager
                    </div>
                    <button id="testManagerLogin" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">
                        –í–æ–π—Ç–∏ –∫–∞–∫ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å
                    </button>
                </div>
            </div>

            <!-- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold mb-4">üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è</h3>
                <div class="space-y-2 text-sm">
                    <div class="flex items-center gap-2 p-2 bg-green-50 rounded">
                        <span class="text-green-600">‚úÖ</span>
                        <span>üè† –ì–ª–∞–≤–Ω–∞—è (dashboard)</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-green-50 rounded">
                        <span class="text-green-600">‚úÖ</span>
                        <span>üöõ –°–≤–æ–¥ –í–∞–≥–æ–Ω–æ–≤</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-green-50 rounded">
                        <span class="text-green-600">‚úÖ</span>
                        <span>üìä –°–≤–æ–¥ –û—Å—Ç–∞—Ç–∫–æ–≤</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-green-50 rounded">
                        <span class="text-green-600">‚úÖ</span>
                        <span>üí≥ –û—Ç—á—ë—Ç –ø–æ –¥–æ–ª–≥–∞–º</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-green-50 rounded">
                        <span class="text-green-600">‚úÖ</span>
                        <span>üöö –ò—Ç–æ–≥–∏ –í–∞–≥–æ–Ω–æ–≤</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-green-50 rounded">
                        <span class="text-green-600">‚úÖ</span>
                        <span>üì¶ –û—Å—Ç–∞—Ç–∫–∏ —Å–∫–ª–∞–¥–æ–≤</span>
                    </div>
                </div>
            </div>

            <!-- –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold mb-4">üö´ –ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã</h3>
                <div class="space-y-2 text-sm">
                    <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
                        <span class="text-red-600">‚ùå</span>
                        <span>üì¶ –ü—Ä–∏—Ö–æ–¥</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
                        <span class="text-red-600">‚ùå</span>
                        <span>üì§ –†–∞—Å—Ö–æ–¥</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
                        <span class="text-red-600">‚ùå</span>
                        <span>üí∞ –ü–æ–≥–∞—à–µ–Ω–∏—è</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
                        <span class="text-red-600">‚ùå</span>
                        <span>üìà –û—Ç—á—ë—Ç—ã</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
                        <span class="text-red-600">‚ùå</span>
                        <span>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
                        <span class="text-red-600">‚ùå</span>
                        <span>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
                    </div>
                    <div class="flex items-center gap-2 p-2 bg-red-50 rounded">
                        <span class="text-red-600">‚ùå</span>
                        <span>üíæ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
                    </div>
                </div>
            </div>

            <!-- –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π -->
            <div class="bg-white p-6 rounded-lg shadow">
                <h3 class="text-lg font-semibold mb-4">üß™ –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π</h3>
                <div class="space-y-3">
                    <button id="testDashboardAccess" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">
                        –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –≥–ª–∞–≤–Ω–æ–π
                    </button>
                    <button id="testRestrictedAccess" class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700">
                        –¢–µ—Å—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
                    </button>
                    <button id="testMenuVisibility" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">
                        –¢–µ—Å—Ç –≤–∏–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—é
                    </button>
                </div>
            </div>
        </div>

        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-6">
            <h4 class="font-semibold text-yellow-800 mb-2">üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:</h4>
            <ol class="text-yellow-700 text-sm space-y-1 list-decimal list-inside">
                <li>–û—Ç–∫—Ä–æ–π—Ç–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª index.html</li>
                <li>–í–æ–π–¥–∏—Ç–µ –∫–∞–∫ —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å (rukovoditel / 123456)</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–Ω–æ–ø–∫–∞ "–ì–ª–∞–≤–Ω–∞—è" –≤–∏–¥–Ω–∞ –≤ –º–µ–Ω—é</li>
                <li>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ "–ì–ª–∞–≤–Ω–∞—è" - –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã —Å–∫—Ä—ã—Ç—ã –∏–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã</li>
                <li>–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç—á–µ—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏</li>
            </ol>
        </div>
    </div>

    <script>
        // –ò–º–∏—Ç–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        const testUsers = [
            { username: 'admin', password: '123456', role: 'admin' },
            { username: 'rukovoditel', password: '123456', role: 'manager' },
            { username: 'warehouse1', password: '123456', role: 'warehouse' },
            { username: 'cashier1', password: '123456', role: 'cashier' }
        ];

        let currentUser = null;

        // –ò–º–∏—Ç–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function showSection(sectionId) {
            console.log('üîÑ –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Ä–∞–∑–¥–µ–ª—É:', sectionId);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Ä–æ–ª–∏ "manager"
            if (currentUser && currentUser.role === 'manager') {
                const allowedSections = ['dashboard', 'wagon-summary', 'balance-summary', 'debt-report', 'wagon-totals', 'stock-balance'];
                if (!allowedSections.includes(sectionId)) {
                    alert('‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É —Ä–∞–∑–¥–µ–ª—É. –î–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å, –æ—Ç—á–µ—Ç—ã –∏ —Å–≤–æ–¥–∫–∏.');
                    return false;
                }
            }
            
            console.log('‚úÖ –î–æ—Å—Ç—É–ø –∫ —Ä–∞–∑–¥–µ–ª—É —Ä–∞–∑—Ä–µ—à–µ–Ω:', sectionId);
            return true;
        }

        function setupUserInterface() {
            if (!currentUser) return;
            
            const role = currentUser.role;
            console.log('üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Ä–æ–ª–∏:', role);

            // –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª–∞–º –º–µ–Ω—é
            const menuItems = {
                'dashboard': ['admin', 'warehouse', 'cashier', 'manager'],
                'income': ['admin', 'warehouse'],
                'expense': ['admin', 'warehouse'],
                'payments': ['admin', 'cashier'],
                'wagon-summary': ['admin', 'warehouse', 'cashier', 'manager'],
                'balance-summary': ['admin', 'warehouse', 'cashier', 'manager'],
                'debt-report': ['admin', 'cashier', 'warehouse', 'manager'],
                'wagon-totals': ['admin', 'warehouse', 'cashier', 'manager'],
                'stock-balance': ['admin', 'cashier', 'manager'],
                'reports': ['admin', 'warehouse', 'cashier'],
                'management': ['admin', 'warehouse', 'cashier'],
                'users': ['admin'],
                'backup': ['admin', 'warehouse', 'cashier']
            };

            console.log('üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã –¥–ª—è —Ä–æ–ª–∏', role + ':', 
                Object.keys(menuItems).filter(section => menuItems[section].includes(role))
            );
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('testManagerLogin').addEventListener('click', function() {
            currentUser = testUsers.find(u => u.username === 'rukovoditel');
            if (currentUser) {
                alert('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω –∫–∞–∫: ' + currentUser.username + ' (—Ä–æ–ª—å: ' + currentUser.role + ')');
                setupUserInterface();
            }
        });

        document.getElementById('testDashboardAccess').addEventListener('click', function() {
            if (!currentUser) {
                alert('‚ùå –°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É');
                return;
            }
            
            const result = showSection('dashboard');
            if (result) {
                alert('‚úÖ –î–æ—Å—Ç—É–ø –∫ –≥–ª–∞–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω!');
            }
        });

        document.getElementById('testRestrictedAccess').addEventListener('click', function() {
            if (!currentUser) {
                alert('‚ùå –°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É');
                return;
            }
            
            showSection('income'); // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è manager
        });

        document.getElementById('testMenuVisibility').addEventListener('click', function() {
            if (!currentUser) {
                alert('‚ùå –°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É');
                return;
            }
            
            setupUserInterface();
            alert('‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –º–µ–Ω—é');
        });
    </script>
</body>
</html>